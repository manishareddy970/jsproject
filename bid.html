<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
     <style>
        #countdown{
                  font-size: 30px;
                  margin-left: 200px;             
        }   
       div:hover{
              transform: scale(1.1);
       }          
     </style>
<body>
    <div id="countdown">
        0:20
    </div>
</body>
<script>
    var a = document.createElement("h1")
    document.body.appendChild(a)
    a.innerText = "Welcome To Bidding Zone";
    a.setAttribute("style", "text-align:center;font-style:italic;color:seagreen;")

      var div1=document.createElement("div")
      document.body.appendChild(div1)
      div1.setAttribute("style","width:250px;border:1px solid gray;margin-left:630px;")
    
      var imgg=document.createElement("img")
      div1.appendChild(imgg)   
      var z=window.localStorage.getItem("total")  
      var y=JSON.parse(z)
    //   console.log(z);
     imgg.setAttribute("src",y["image"])
     imgg.setAttribute("style","width:250px")

    var div2 = document.createElement("div")
    document.body.appendChild(div2)
    div2.setAttribute("style", "width:250px;height:250px;border:1px solid gray;border-radius:10%;margin-left:250px;margin-top:50px;")
    div2.style.borderColor="black"
    div2.style.display = "inline-block";

    var div3 = document.createElement("div")
    document.body.appendChild(div3)
    div3.setAttribute("style", "width:250px;height:250px;border:1px solid gray;border-radius:10%;margin-left:130px;margin-top:50px")
    div3.style.borderColor="black"
    div3.style.display = "inline-block";

    var div4 = document.createElement("div")
    document.body.appendChild(div4)
    div4.setAttribute("style", "width:250px;height:250px;border:1px solid gray;;border-radius:10%;margin-left:130px;margin-top:50px")
    div4.style.borderColor="black"
    div4.style.display = "inline-block";

    var user = document.createElement("h3")
    div2.appendChild(user)
    user.innerText = "USER";
    user.setAttribute("style", "margin-left:100px")
    var user = document.createElement("h3")
    div2.appendChild(user)
    user.innerText = "A";
    user.setAttribute("style", "margin-left:120px")

    var user = document.createElement("h3")
    div3.appendChild(user)
    user.innerText = "USER";
    user.setAttribute("style", "margin-left:100px")
    var user = document.createElement("h3")
    div3.appendChild(user)
    user.innerText = "B";
    user.setAttribute("style", "margin-left:120px")

    var user = document.createElement("h3")
    div4.appendChild(user)
    user.innerText = "USER";
    user.setAttribute("style", "margin-left:100px")
    var user = document.createElement("h3")
    div4.appendChild(user)
    user.innerText = "C";
    user.setAttribute("style", "margin-left:120px")

    var enter = document.createElement("p")
    div2.appendChild(enter)
    enter.innerText = "Enter Amount"
    enter.setAttribute("style", "margin-left:80px")

    var form = document.createElement("form")
    document.body.appendChild(form)
    var input = document.createElement("input")
    form.appendChild(input)
    div2.appendChild(form)
    input.setAttribute("type", "num")
    input.setAttribute("style", "margin-left:40px;")

    var btn1 = document.createElement("button")
    form.appendChild(btn1)
    btn1.innerText = "bid";
    btn1.setAttribute("style", "margin-left:90px;margin-top:20px;width:80px")

    var enter = document.createElement("p")
    div3.appendChild(enter)
    enter.innerText = "Enter Amount"
    enter.setAttribute("style", "margin-left:80px")

    var form = document.createElement("form")
    document.body.appendChild(form)
    var input = document.createElement("input")
    form.appendChild(input)
    div3.appendChild(form)
    input.setAttribute("type", "num")
    input.setAttribute("style", "margin-left:40px;")

    var btn2 = document.createElement("button")
    form.appendChild(btn2)
    btn2.innerText = "bid";
    btn2.setAttribute("style", "margin-left:90px;margin-top:20px;width:80px")

    var enter = document.createElement("p")
    div4.appendChild(enter)
    enter.innerText = "Enter Amount"
    enter.setAttribute("style", "margin-left:80px")

    var form = document.createElement("form")
    document.body.appendChild(form)
    var input = document.createElement("input")
    form.appendChild(input)
    div4.appendChild(form)
    input.setAttribute("type", "num")
    input.setAttribute("style", "margin-left:40px;")

    var btn3 = document.createElement("button")
    form.appendChild(btn3)
    btn3.innerText = "Bid";
    btn3.setAttribute("style", "margin-left:90px;margin-top:20px;width:80px")

    let seconds = 20;
    countdown();
    var arr1 = [];
    document.forms[0].addEventListener("submit", function (e) {
        e.preventDefault();
        var obj = {
            user: e.target[0].value
        }
        arr1.push(obj);
        window.localStorage.setItem("user1", JSON.stringify(arr1))
        e.target[0].value = "";
    })
    var arr2 = [];
    document.forms[1].addEventListener("submit", function (e) {
        e.preventDefault();
        var obj = {
            user: e.target[0].value
        }
        arr2.push(obj);
        window.localStorage.setItem("user2", JSON.stringify(arr2))
        e.target[0].value = "";
    })
    var arr3 = [];
    document.forms[2].addEventListener("submit", function (e) {
        e.preventDefault();
        var obj = {
            user: e.target[0].value
        }
        arr3.push(obj);

        window.localStorage.setItem("user3", JSON.stringify(arr3))

        e.target[0].value = "";
    })
    function countdown() {
        var count = setInterval(() => {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            document.getElementById("countdown").innerText = minutes + ":" + remainingSeconds
            // console.log(`${minutes} minutes ${remainingSeconds} seconds`);

            if (seconds === 0) {
                clearInterval(count);
                var a = window.localStorage.getItem("user1")
                var userA = JSON.parse(a)

                var b = window.localStorage.getItem("user2")
                var userB = JSON.parse(b)

                var c = window.localStorage.getItem("user3")
                var userC = JSON.parse(c)

                console.log(userA[0].user)
                console.log(userB[0].user)
                console.log(userC[0].user)

                if (Number(userA[0].user) > Number(userB[0].user)) {
                    if (Number(userA[0].user) > Number(userC[0].user)) {
                           alert("User C is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                    else {
                         alert("User C is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                }
                else if (Number(userB[0].user) > Number(userC[0].user)) {
                    if (Number(userB[0].user) > Number(userA[0].user)) {
                         alert("User B is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                    else {
                         alert("user A is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                }
                else if (Number(userC[0].user) > Number(userA[0].user)) {
                    if (Number(userC[0].user) > Number(userB[0].user)) {
                         alert("User C is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                    else {
                         alert("User B is Winner")
                        localStorage.removeItem('user1')
                        localStorage.removeItem('user2')
                        localStorage.removeItem('user3')
                    }
                }
            }
            seconds--;
      }, 1000);
    }
</script>
</html>